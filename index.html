<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MKOPA Unlock Portal — Modern</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Bootstrap (only for grid) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    :root{
      --bg-1:#071022; --bg-2:#0e2233; --glass: rgba(255,255,255,0.04);
      --accent:#25a6ff; --accent-2:#00e0a3; --muted:#b6c3ce;
      --card-radius:18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Poppins,system-ui,Segoe UI,Helvetica,Arial;
      background:radial-gradient(1200px 600px at 10% 10%, rgba(37,166,255,0.06), transparent),
                 linear-gradient(180deg,var(--bg-1),var(--bg-2));
      color:#eaf6ff; -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale; padding:32px;
    }

    .wrap{max-width:1100px;margin:0 auto}
    .portal{
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:var(--card-radius); padding:28px; overflow:hidden; box-shadow:0 10px 40px rgba(2,10,20,0.6);
      display:grid; grid-template-columns: 380px 1fr; gap:24px; align-items:start;
    }
    @media (max-width: 980px){.portal{grid-template-columns:1fr}}
    .left{ padding:20px; border-radius:14px; background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent); border:1px solid rgba(255,255,255,0.03); }
    .brand{display:flex;align-items:center;gap:12px}
    .brand img{width:72px;height:72px;border-radius:12px;object-fit:contain;filter:drop-shadow(0 6px 18px rgba(0,0,0,0.6))}
    .brand .title{font-weight:600;font-size:1.05rem}
    .brand .sub{font-size:0.78rem;color:var(--muted)}
    .badge-sec{display:inline-flex;gap:8px;align-items:center;background:linear-gradient(90deg, rgba(37,166,255,0.12), rgba(0,224,163,0.06));padding:6px 10px;border-radius:999px;font-weight:600;color:var(--accent)}
    .kpi{margin-top:18px;display:flex;flex-direction:column;gap:10px}
    .kpi .item{display:flex;justify-content:space-between;align-items:center;padding:10px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));border:1px solid rgba(255,255,255,0.02)}
    .kpi .label{font-size:0.9rem;color:var(--muted)}
    .kpi .val{font-weight:600}
    .steps{margin-top:20px}
    .step-pill{display:flex;gap:8px;align-items:center;margin-bottom:10px}
    .step-icon{width:36px;height:36px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));display:flex;align-items:center;justify-content:center}
    .step-label{font-size:0.9rem}
    .main{padding:20px;border-radius:14px; min-height:420px; background:linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.006)); border:1px solid rgba(255,255,255,0.02)}
    .card{background:transparent}
    h2{margin:0 0 12px 0}
    form .row{gap:12px}
    .field{position:relative;margin-bottom:14px}
    .field input,.field select{width:100%;padding:12px 14px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);background:rgba(255,255,255,0.02);color:inherit}
    .field label{position:absolute;left:14px;top:12px;font-size:0.85rem;color:var(--muted);pointer-events:none;transition:0.18s}
    .field input:focus + label,.field input:not(:placeholder-shown) + label{top:-8px;left:12px;background:var(--bg-2);padding:0 6px;font-size:0.72rem;color:var(--accent)}
    .btn-primary{background:linear-gradient(90deg,var(--accent),#00c6ff);border:none;color:#012; font-weight:700; padding:12px 16px;border-radius:12px}
    .btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);padding:10px 12px;border-radius:10px}
    .terminal{background:#02040a;border-radius:10px;padding:12px;font-family:monospace;font-size:0.85rem;color:#9ae0ff;box-shadow:inset 0 0 30px rgba(0,0,0,0.6)}
    .term-line{opacity:0; transform:translateY(6px); animation:termIn 0.45s forwards;}
    @keyframes termIn{to{opacity:1;transform:none}}
    .progress-wrap{margin-top:14px}
    .prog{height:12px;background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:999px;overflow:hidden}
    .prog .fill{height:100%;width:0%;background:linear-gradient(90deg,var(--accent),var(--accent-2));transition:width 600ms cubic-bezier(.2,.9,.2,1)}
    .success{display:flex;flex-direction:column;align-items:center;gap:8px}
    .check{width:96px;height:96px;border-radius:50%;display:grid;place-items:center;background:linear-gradient(135deg, rgba(37,166,255,0.12), rgba(0,224,163,0.08));border:1px solid rgba(255,255,255,0.03)}
    .muted{color:var(--muted)}
    .small{font-size:0.85rem}
    .pulse{animation:pulse 2s infinite}
    @keyframes pulse{0%{box-shadow:0 0 0 0 rgba(37,166,255,0.12)}70%{box-shadow:0 0 0 20px rgba(37,166,255,0)}100%{box-shadow:0 0 0 0 rgba(37,166,255,0)}}
    footer{margin-top:18px;text-align:center;color:var(--muted);font-size:0.82rem}
    pre { white-space:pre-wrap; word-break:break-word; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="portal" role="application" aria-labelledby="portalTitle">

      <!-- LEFT: Brand + KPIs + Steps -->
      <aside class="left">
        <div class="brand">
          <img src="https://images.seeklogo.com/logo-png/55/1/m-kopa-logo-png_seeklogo-559571.png" alt="MKOPA"/>
          <div>
            <div class="title">MKOPA Unlock Portal</div>
            <div class="sub">Authorized service</div>
          </div>
        </div>

        <div style="margin-top:14px;display:flex;justify-content:space-between;align-items:center">
          <div class="badge-sec"><i class="fas fa-lock"></i><span style="margin-left:8px">SECURE</span></div>
          <div class="muted small">v3.2.1</div>
        </div>

        <div class="kpi">
          <div class="item"><div class="label">Active sessions</div><div class="val" id="kpi-sessions">3</div></div>
          <div class="item"><div class="label">Avg unlocking time</div><div class="val">4m 20s</div></div>
          <div class="item"><div class="label">Support</div><div class="val">+254 1120 11036</div></div>
        </div>

        <div class="steps">
          <div class="step-pill"><div class="step-icon"><i class="fas fa-mobile-screen-button"></i></div><div class="step-label">1. Device Info</div></div>
          <div class="step-pill"><div class="step-icon"><i class="fas fa-user-check"></i></div><div class="step-label">2. Verification</div></div>
          <div class="step-pill"><div class="step-icon"><i class="fas fa-wrench"></i></div><div class="step-label">3. Unlocking</div></div>
          <div class="step-pill"><div class="step-icon"><i class="fas fa-check-circle"></i></div><div class="step-label">4. Complete</div></div>
        </div>
      </aside>

      <!-- RIGHT: Main flow -->
      <main class="main" id="main">

        <section id="step-device" class="step">
          <h2>Device Information</h2>
          <p class="muted small">Provide correct device details.</p>

          <form id="deviceForm" autocomplete="off">
            <div class="row">
              <div class="col-md-6">
                <div class="field">
                  <input id="deviceModel" placeholder=" " required>
                  <label for="deviceModel">Device model (e.g. Samsung A10)</label>
                </div>
              </div>

              <div class="col-md-6">
                <div class="field">
                  <input 
                    type="text"
                    id="imei" 
                    placeholder="15-digit IMEI" 
                    inputmode="numeric" 
                    maxlength="15" 
                    pattern="\d{15}" 
                    required
                    oninput="this.value = this.value.replace(/[^0-9]/g, '')">
                  <label for="imei">IMEI (15 digits)</label>
                  <small class="muted small"><i class="fas fa-info-circle me-1"></i> Dial *#06# to find IMEI</small>
                </div>
              </div>

              <div class="col-md-6">
                <div class="field">
                  <input 
                    type="tel" 
                    id="phone" 
                    placeholder=" " 
                    pattern="\d{9,15}" 
                    required>
                  <label for="phone">Phone number (international, e.g. 254712345678)</label>
                </div>
              </div>
            </div>

            <div style="display:flex;gap:10px;margin-top:12px">
              <button type="submit" class="btn-primary">Verify & Next</button>
            </div>
          </form>
        </section>

        <!-- Verification step -->
        <section id="step-verify" class="step" style="display:none">
          <h2>Admin Verification</h2>
          <p class="muted small">Enter admin credentials to authorize unlock.</p>

          <div style="display:grid;grid-template-columns:1fr 320px;gap:18px">
            <div>
              <div class="field"><input id="adminPass" placeholder=" " type="password"><label for="adminPass">Admin password</label></div>
              <div style="display:flex;gap:8px;margin-top:6px">
                <button class="btn-primary" id="authorize">Authorize</button>
                <button class="btn-ghost" id="backToDevice">Back</button>
              </div>

              <div id="summary" style="margin-top:14px;background:rgba(255,255,255,0.02);padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.02)"></div>
            </div>

            <div>
              <div style="border-radius:10px;padding:12px;background:linear-gradient(180deg, rgba(255,255,255,0.015), transparent);border:1px solid rgba(255,255,255,0.02)">
                <div class="muted small">Request metadata</div>
                <div style="margin-top:10px">
                  <div class="kpi item"><div class="label">Device ID</div><div class="val" id="deviceId">--</div></div>
                  <div class="kpi item"><div class="label">IP (visual)</div><div class="val" id="ipFake">--</div></div>
                  <div class="kpi item"><div class="label">ISP (sim)</div><div class="val" id="ispFake">--</div></div>
                  <div class="kpi item"><div class="label">Browser / OS</div><div class="val" id="uaVal">--</div></div>
                  <div class="kpi item"><div class="label">Device model (UA)</div><div class="val" id="modelVal">--</div></div>
                  <div class="kpi item"><div class="label">Memory / Cores</div><div class="val" id="hwVal">--</div></div>
                </div>
              </div>
            </div>
          </div>
        </section>

      </main>

    </div>
    <footer>© MKOPA Solutions Ltd — Portal</footer>
  </div>

  <script>
    const $ = sel => document.querySelector(sel);

    function genDeviceId(imei){
      const base = imei ? imei.slice(-6) : Math.random().toString(36).slice(2,8);
      return 'MKP-'+base.toUpperCase()+'-'+Date.now().toString().slice(-5);
    }

    async function detectDevice(updateSummary=false){
      $('#screenVal')?.textContent = `${window.screen.width}×${window.screen.height} @ ${window.devicePixelRatio || 1}x`;
      $('#hwVal')?.textContent = (navigator.deviceMemory||'Unknown')+' GB / '+(navigator.hardwareConcurrency||'Unknown')+' cores';
      if(updateSummary) fillMetadataForVerify();
    }

    function fillMetadataForVerify(){
      const imei = $('#imei').value.trim();
      $('#deviceId').textContent = genDeviceId(imei);
    }

    const deviceForm = $('#deviceForm');
    deviceForm.addEventListener('submit', async e => {
      e.preventDefault();
      const imei = $('#imei').value.trim();
      const phone = $('#phone').value.trim();
      if(!/^\d{15}$/.test(imei)){ alert('IMEI must be exactly 15 digits'); $('#imei').focus(); return; }
      if(!/^\d{9,15}$/.test(phone)){ alert('Phone must be 9–15 digits'); $('#phone').focus(); return; }

      $('#summary').textContent = `Model: ${$('#deviceModel').value}\nIMEI: ${imei}\nPhone: ${phone}`;
      await detectDevice(true);
      showStep('verify');
    });

    function showStep(k){
      const map = { device: 'step-device', verify: 'step-verify'};
      Object.values(map).forEach(id => document.getElementById(id).style.display = 'none');
      const active = document.getElementById(map[k]);
      if(active) active.style.display = 'block';
    }

    $('#backToDevice')?.addEventListener('click', ()=>{ showStep('device'); });
  </script>
</body>
</html>
